<%= javascript_include_tag :defaults %>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAMvi2FqoVGYQHauT89vyCwRTJpvUfPekG8ygETNFc9Rpby331ARRCsGFWkLJ8kIuFihpmObCxRPTYnA"
        type="text/javascript"></script>

<script type="text/javascript">
  function loadGMap(latitude, longitude, img){
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map"));
        map.setCenter(new GLatLng(latitude, longitude), 15);
        map.addControl(new GLargeMapControl());
        map.addControl(new GMapTypeControl());
        point = new GLatLng(latitude, longitude)
        marker = new GMarker(point);
        map.addOverlay(marker);
        GEvent.addListener(marker, "click", function() {
            map.openInfoWindowHtml(point, '<img src="' + img + '" />');
        });
     }
  }

  function getScroll(){
    ScrollTop = document.body.scrollTop;
    if (ScrollTop == 0) {
      if (window.pageYOffset) {
          ScrollTop = window.pageYOffset;
      }  else {
        ScrollTop = (document.body.parentElement) ? document.body.parentElement.scrollTop : 0;
      }
    }
    return ScrollTop;
  }
  window.onscroll = function() {
    document.getElementById("details").style.top = getScroll() + 150 + "px";
  }
</script>

<div id="details" style="position:absolute; top:150px; left:600px;">
  <div id="photo">
  </div>
  <div id="map" style="width:500px;height:300px">

  </div>
</div>

<table>
  <tr>
    <th>Nome</th>
    <th>Album</th>
    <th>Longitude</th>
    <th>Latitude</th>
  </tr>

<% photos_list.each_with_index do |photo, index| %>
  <tr>
    <td><%=h photo.title %></td>
    <td><%= link_to photo.album.name, photo.album %></td>
    <td><%=h photo.long %></td>
    <td><%=h photo.lat %></td>
    <td><%= link_to_remote 'Show', :update => "photo", :url => album_photo_path(:album_id => photo.album.id, :photo_num => index), :method => :GET %></td>
    <td><%= link_to 'Edit', edit_photo_path(photo) %></td>
    <td><%= link_to 'Destroy', photo, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>
<br />
